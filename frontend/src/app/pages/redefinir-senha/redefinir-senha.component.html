<div class="redefinir-senha-container">
  <app-dots-background [count]="12"></app-dots-background>
  <div class="card">
    <h1 class="card-title">Redefinição de Senha</h1>

    <div *ngIf="verificandoToken" class="loading">
      <div class="spinner"></div>
      <p>Verificando token...</p>
    </div>
    
    <div *ngIf="!verificandoToken && !tokenValido && !sucesso" class="error-container">
      <p class="error-message">{{ erro }}</p>
      <button class="btn btn-primary" style="width: 100%;" (click)="voltar()">Voltar ao Login</button>
    </div>
    
    <div *ngIf="!verificandoToken && tokenValido && !sucesso">
      <p class="form-description">
        Digite sua nova senha para continuar.
      </p>
      
      <form (ngSubmit)="onSubmit()">
        <div class="form-group">
          <label for="novaSenha">Nova Senha</label>
          <input 
            id="novaSenha" 
            type="password" 
            [(ngModel)]="novaSenha" 
            name="novaSenha" 
            required 
            class="input" 
            placeholder="Digite sua nova senha">
        </div>
        
        <div class="form-group">
          <label for="confirmarSenha">Confirmar Senha</label>
          <input 
            id="confirmarSenha" 
            type="password" 
            [(ngModel)]="confirmarSenha" 
            name="confirmarSenha" 
            required 
            class="input" 
            placeholder="Confirme sua nova senha">
        </div>
        
        <div *ngIf="erro" class="error-message">{{ erro }}</div>
        
        <div *ngIf="loading" class="loading">
          <div class="spinner"></div>
          <p>Processando sua solicitação...</p>
        </div>
        
        <div class="form-actions">
          <button type="button" class="btn btn-secondary" (click)="voltar()">Cancelar</button>
          <button type="submit" class="btn btn-primary" [disabled]="loading">Alterar Senha</button>
        </div>
      </form>
    </div>
    
    <div *ngIf="sucesso" class="success-container">
      <div class="success-icon">✓</div>
      <p class="success-message">Sua senha foi alterada com sucesso!</p>
      <button class="btn btn-primary" style="width: 100%;" (click)="voltar()">Ir para Login</button>
    </div>
  </div>
</div>