# ======================================================
# CONFIGURAÇÃO PARA PRODUÇÃO NO RENDER
# ======================================================

spring.application.name=memuvie

# Perfil ativo para produção
spring.profiles.active=prod

# ======================================================
# SPRINGDOC / SWAGGER CONFIGURAÇÕES
# ======================================================

springdoc.api-docs.path=/v3/api-docs
springdoc.swagger-ui.path=/swagger-ui.html
springdoc.swagger-ui.operationsSorter=method
springdoc.swagger-ui.tagsSorter=alpha
springdoc.show-actuator=false

# ======================================================
# CONFIGURAÇÕES DO BANCO DE DADOS POSTGRESQL (RENDER)
# ======================================================

# URL do banco - usar External Database URL para conectividade externa
spring.datasource.url=${DATABASE_URL:postgresql://memuvie_user:U94rCAXl4R4VYKgJABd9Mu50oQPaE7rY@dpg-d3g0f5mr433s738qm1mg-a.virginia-postgres.render.com/memuvie}
spring.datasource.username=${DB_USERNAME:memuvie_user}
spring.datasource.password=${DB_PASSWORD:U94rCAXl4R4VYKgJABd9Mu50oQPaE7rY}
spring.datasource.driver-class-name=org.postgresql.Driver

# Configurações específicas do PostgreSQL para Render
spring.datasource.hikari.maximum-pool-size=10
spring.datasource.hikari.minimum-idle=2
spring.datasource.hikari.connection-timeout=20000
spring.datasource.hikari.idle-timeout=300000
spring.datasource.hikari.max-lifetime=1800000
spring.datasource.hikari.leak-detection-threshold=60000

# JPA/Hibernate configurações para produção
spring.jpa.open-in-view=false
spring.jpa.hibernate.ddl-auto=update
spring.jpa.properties.hibernate.dialect=org.hibernate.dialect.PostgreSQLDialect
spring.jpa.show-sql=false
spring.jpa.properties.hibernate.format_sql=false

# Configurações Flyway para migração
spring.flyway.enabled=true
spring.flyway.locations=classpath:db/migration
spring.flyway.baseline-on-migrate=true
spring.flyway.baseline-version=0

# ======================================================
# CONFIGURAÇÕES DO SERVIDOR
# ======================================================

# Porta será fornecida pelo Render via variável PORT
server.port=${PORT:8080}

# Context path para API
server.servlet.context-path=/api

# ======================================================
# CONFIGURAÇÕES JWT
# ======================================================

# JWT Secret - usar variável de ambiente em produção
jwt.secret=${JWT_SECRET:memuvie_jwt_secret_key_2025_super_seguro_nao_compartilhar_123456789}
jwt.expiration=86400000

# ======================================================
# CONFIGURAÇÕES DE UPLOAD
# ======================================================

spring.servlet.multipart.max-file-size=100MB
spring.servlet.multipart.max-request-size=100MB
upload.path=${UPLOAD_PATH:/uploads/memuvie/}

# ======================================================
# CONFIGURAÇÕES DO CLOUDINARY
# ======================================================

cloudinary.cloud_name=${CLOUDINARY_CLOUD_NAME:dvauwroyx}
cloudinary.api_key=${CLOUDINARY_API_KEY:414834393456219}
cloudinary.api_secret=${CLOUDINARY_API_SECRET:u9aQX-vUJeiv6xXRdErvybNCHm8}

# ======================================================
# CONFIGURAÇÕES DE EMAIL
# ======================================================

spring.mail.host=${MAIL_HOST:smtp.gmail.com}
spring.mail.port=${MAIL_PORT:587}
spring.mail.username=${MAIL_USERNAME:memuvie.app@gmail.com}
spring.mail.password=${dvtu zlng aebi foms}
spring.mail.properties.mail.smtp.auth=true
spring.mail.properties.mail.smtp.starttls.enable=true
spring.mail.properties.mail.smtp.connectiontimeout=10000
spring.mail.properties.mail.smtp.timeout=10000
spring.mail.properties.mail.smtp.writetimeout=10000
spring.mail.properties.mail.smtp.ssl.trust=*

# Configuração para cada provedor de email
# Gmail
mail.provider.gmail.host=smtp.gmail.com
mail.provider.gmail.port=587
mail.provider.gmail.auth=true
mail.provider.gmail.starttls=true

# Outlook/Hotmail
mail.provider.outlook.host=smtp.office365.com
mail.provider.outlook.port=587
mail.provider.outlook.auth=true
mail.provider.outlook.starttls=true

# iCloud
mail.provider.icloud.host=smtp.mail.me.com
mail.provider.icloud.port=587
mail.provider.icloud.auth=true
mail.provider.icloud.starttls=true

# Hotmail (mesmo que Outlook mas mantido para compatibilidade)
mail.provider.hotmail.host=smtp.office365.com
mail.provider.hotmail.port=587
mail.provider.hotmail.auth=true
mail.provider.hotmail.starttls=true

# ======================================================
# URL DO FRONTEND
# ======================================================

# URL do frontend para CORS e links de redefinição
app.frontend.url=${FRONTEND_URL:https://memuvie-frontend.onrender.com}

# ======================================================
# CONFIGURAÇÕES DE LOGGING PARA PRODUÇÃO
# ======================================================

logging.level.cha_revelacao=INFO
logging.level.org.springframework.security=WARN
logging.level.org.springframework.mail=WARN
logging.level.com.sun.mail=WARN
logging.level.javax.mail=WARN
logging.level.org.hibernate.SQL=WARN
logging.level.org.hibernate.type.descriptor.sql.BasicBinder=WARN
logging.level.cha_revelacao.service.EmailService=INFO
logging.level.cha_revelacao.config.EmailConfig=INFO

# ======================================================
# CONFIGURAÇÕES DE SEGURANÇA
# ======================================================

# Desabilitar informações sensíveis em produção
management.endpoints.web.exposure.include=health,info
management.endpoint.health.show-details=when-authorized